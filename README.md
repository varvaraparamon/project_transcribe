# –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ —Å –ø–æ–º–æ—â—å—é Whisper + Flask + PostgreSQL

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Flask, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å –∞—É–¥–∏–æ—Ñ–∞–π–ª—ã –∏ –ø–æ–ª—É—á–∞—Ç—å –∏—Ö —Ç–µ–∫—Å—Ç–æ–≤—É—é —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É.  
–¢–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ PostgreSQL, –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω –∏ —Å–∫–∞—á–∞–Ω —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ)

### 1. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/your-username/project_transcribe.git
cd project_transcribe 
```
### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –°–æ–∑–¥–∞–π –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:

``` bash
python3 -m venv venv
source venv/bin/activate  # –∏–ª–∏ .\venv\Scripts\activate –Ω–∞ Windows
```
- –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:

```bash
pip install -r requirements.txt
```
### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
- –£—Å—Ç–∞–Ω–æ–≤–∏ PostgreSQL (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):

``` bash
sudo apt update
sudo apt install postgresql postgresql-contrib
```
- –°–æ–∑–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:

``` bash
sudo -u postgres psql
```

- –í –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ psql:

``` sql
CREATE USER admin WITH PASSWORD 'yourpassword' SUPERUSER;
CREATE DATABASE transcribe_db OWNER admin;
\q
```

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –ø–æ—Ä—Ç–∞  
–ï—Å–ª–∏ –ø–ª–∞–Ω–∏—Ä—É–µ—à—å –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É–¥–∞–ª—ë–Ω–Ω–æ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5433 –≤–º–µ—Å—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ 5432), –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1) –ò–∑–º–µ–Ω–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é PostgreSQL

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª postgresql.conf (–æ–±—ã—á–Ω–æ –≤ /etc/postgresql/<–≤–µ—Ä—Å–∏—è>/main/postgresql.conf) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏:

``` conf
listen_addresses = '*'
port = 5433  # –∏–ª–∏ —Ç–≤–æ–π –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ—Ä—Ç
```

2) –ù–∞—Å—Ç—Ä–æ–π –ø—Ä–∞–≤–∏–ª–∞ –¥–æ—Å—Ç—É–ø–∞

–û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª pg_hba.conf (–æ–±—ã—á–Ω–æ –≤ —Ç–æ–π –∂–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏) –∏ –¥–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É, —Ä–∞–∑—Ä–µ—à–∞—é—â—É—é –¥–æ—Å—Ç—É–ø:

``` conf
host    all             all             0.0.0.0/0               md5
```

3) –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å PostgreSQL

``` bash
sudo systemctl restart postgresql
```

4) –û—Ç–∫—Ä–æ–π –ø–æ—Ä—Ç –≤ —Ñ–∞–π–µ—Ä–≤–æ–ª–µ (–µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω)

``` bash
sudo ufw allow 5433/tcp
```
–ü—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ pgAdmin –∏–ª–∏ –¥—Ä—É–≥–æ–π –∫–ª–∏–µ–Ω—Ç —É–∫–∞–∂–∏ –ø–æ—Ä—Ç 5433 (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ç–æ–±–æ–π).


### 4. –ù–∞—Å—Ç—Ä–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª config.py –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–æ–±–∞–≤—å —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è, —É–∫–∞–∂–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç:

```python 
DB_URL = "postgresql://admin:yourpassword@yourlocalip:5433/transcribe_db"
```

–ß—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å IP-–∞–¥—Ä–µ—Å –Ω–æ—É—Ç–±—É–∫–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏:
``` bash
ip a
```
–∏–ª–∏

``` bash
hostname -I
```

### 5. –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
``` bash
gunicorn app:app --bind 192.168.0.103:5000 --workers 4 # –¥–ª—è –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏
```

``` bash
flask run --host=192.168.0.103 --port=5000 # –æ–¥–∏–Ω –ø–æ—Ç–æ–∫
```

(–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –∞–π–ø–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏)

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ http://192.168.0.103:5000

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
``` csharp
project_transcribe/
‚îú‚îÄ‚îÄ app.py
‚îú‚îÄ‚îÄ config.py
‚îú‚îÄ‚îÄ db.py
‚îú‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ history.html
‚îÇ   ‚îî‚îÄ‚îÄ view_transcript.html
‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îî‚îÄ‚îÄ styles.css
‚îú‚îÄ‚îÄ uploads/               # —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îú‚îÄ‚îÄ transcripts/           # —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚îî‚îÄ‚îÄ venv/                  # –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```