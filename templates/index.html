<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8" />
    <title>üé§ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>

<body>
    <h2>üé§ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ –∞—É–¥–∏–æ</h2>

    <form id="transcribe-form" action="/transcribe" method="post" enctype="multipart/form-data">

        <label class="custom-file-upload">
            <input type="file" id="audio-file" name="audio" accept="audio/*" required />
            –í—ã–±—Ä–∞—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª
        </label>
        <span id="file-name" style="margin-left: 10px; font-weight: 600;"></span>

        <!-- –ë–ª–æ–∫ –∞–Ω–∏–º–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ -->
        <div id="loading">
            <span class="loader"></span> –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>

        <script>
            document.getElementById('audio-file').addEventListener('change', function () {
                const fileNameSpan = document.getElementById('file-name');
                if (this.files.length > 0) {
                    fileNameSpan.textContent = this.files[0].name;
                } else {
                    fileNameSpan.textContent = '';
                }
            });

            const form = document.getElementById('transcribe-form');
            const loadingDiv = document.getElementById('loading');
            const submitBtn = form.querySelector('input[type="submit"]');

            form.addEventListener('submit', function () {
                loadingDiv.style.display = 'block';    // –ø–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é
                submitBtn.disabled = true;              // –±–ª–æ–∫–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É
            });
        </script>

        <div style="text-align:center; margin-top: 10px;">
            <label style="font-size: 18px; cursor: pointer;">
                <input type="checkbox" name="download" />
                –°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
            </label>
        </div>

        <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" />
    </form>

    <a href="/history">üìú –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–π</a>

</body>

</html>